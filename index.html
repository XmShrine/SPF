<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯¹ç§°å¤šé¡¹å¼åˆç­‰åˆ†è§£ - æš—é»‘æ¨¡å¼</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-Gvr4j2wz/7e0oKjD+xT5s5z9f+S+9yA9l1w2t0QWp4P9p3q7PzX2a8D/O5z5A9Z4w" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-U/pT2C8/W+Y/Bw0n0f6l9z2G+I/T2v2xT5s+t+9z4A4A7d3x+W1W+Q1W+X2+Y+Y" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" integrity="sha384-J8t+fWwS/kSj/xX/Y+pT5o+qB1b2zFf/P8W5wWlA3G4w+5z7B8/9Q2O/z5W+C6D/Q1F9E3P9D/A4A7g/g" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

    <style>
        /* ----------------------------------- */
        /* åŸºç¡€ä¸æ’ç‰ˆ - è‹¹æœæš—é»‘è®¾è®¡è¯­è¨€ */
        /* ----------------------------------- */
        :root {
            --apple-bg: #1e1e1e; /* æ·±é‚ƒçš„æš—ç°è‰²èƒŒæ™¯ */
            --apple-card-bg: #2c2c2e; /* å¡ç‰‡èƒŒæ™¯ï¼Œç•¥æµ…äºä¸»èƒŒæ™¯ */
            --apple-border: #444444; /* æ·±è‰²èƒŒæ™¯ä¸‹çš„æŸ”å’Œè¾¹æ¡† */
            --apple-shadow: rgba(0, 0, 0, 0.4); /* æš—é»‘æ¨¡å¼ä¸‹çš„é˜´å½± */
            --apple-primary: #0a84ff; /* è“è‰²ä¸»è‰²è°ƒ (æ›´äº®çš„ Apple Blue é€‚åº”æš—è‰²) */
            --apple-text-color: #f0f0f0; /* äº®ç™½è‰²ä¸»æ–‡å­— */
            --apple-secondary-text: #aeaeb3; /* æŸ”å’Œçš„æµ…ç°è‰²è¾…åŠ©æ–‡å­— */
            --apple-radius: 12px;
            --apple-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --input-box-bg: #3c3c3e; /* è¾“å…¥æ¡†çš„æ›´æ·±èƒŒæ™¯ */
        }

        body {
            font-family: var(--apple-font);
            background-color: var(--apple-bg);
            color: var(--apple-text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            box-sizing: border-box;
            /* ç¡®ä¿ KaTeX åœ¨æš—é»‘æ¨¡å¼ä¸‹çš„é¢œè‰²é€‚é… */
            --katex-color: var(--apple-text-color);
        }

        .container {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* å¡ç‰‡é£æ ¼ */
        .card {
            background-color: var(--apple-card-bg);
            border-radius: var(--apple-radius);
            padding: 25px;
            /* æ¨¡æ‹Ÿ macOS çª—å£çš„æ·±åº¦æ„Ÿ */
            box-shadow: 0 8px 30px var(--apple-shadow); 
            border: 1px solid var(--apple-border);
            transition: box-shadow 0.3s ease, border-color 0.3s;
        }

        .card:hover {
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.5);
            border-color: #555555;
        }
        
        /* å¼ºåˆ¶ KaTeX å…¬å¼é¢œè‰²ä¸ºç™½è‰² (å› ä¸ºå®ƒå¯èƒ½é»˜è®¤æ˜¯é»‘è‰²) */
        .katex, .katex-display {
            color: var(--apple-text-color) !important;
        }

        /* ----------------------------------- */
        /* å¤´éƒ¨ä¸æ ‡é¢˜ */
        /* ----------------------------------- */
        .header-card {
            text-align: center;
        }

        .header-card h1 {
            font-size: 28px;
            font-weight: 600;
            margin: 0 0 5px 0;
        }

        .header-card p {
            color: var(--apple-secondary-text);
            font-size: 16px;
            margin: 0;
        }

        /* ----------------------------------- */
        /* è¾“å…¥ä¸æŒ‰é’® */
        /* ----------------------------------- */
        .input-area {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        #polyInput {
            flex-grow: 1;
            width: 100%;
            min-height: 120px;
            resize: vertical;
            padding: 15px;
            background-color: var(--input-box-bg); /* æ›´æ·±çš„è¾“å…¥æ¡†èƒŒæ™¯ */
            border: 1px solid var(--apple-border);
            border-radius: 8px;
            font-size: 16px;
            font-family: monospace;
            color: var(--apple-text-color);
            transition: border-color 0.2s, box-shadow 0.2s;
            outline: none;
        }

        #polyInput:focus {
            border-color: var(--apple-primary);
            box-shadow: 0 0 0 3px rgba(10, 132, 255, 0.3); /* èšç„¦å…‰æ™•æ•ˆæœ */
        }

        .action-button {
            background-color: var(--apple-primary);
            color: black; /* ç¡®ä¿æ–‡å­—åœ¨äº®è“èƒŒæ™¯ä¸Šæ¸…æ™° */
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: 600; /* åŠ ç²— */
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s, transform 0.1s, opacity 0.2s;
            height: 120px;
            min-width: 80px;
        }
        /* æ¨¡æ‹Ÿè‹¹æœ SF Symbols é£æ ¼çš„äº®è‰²æŒ‰é’®æ–‡æœ¬ */
        .action-button .icon, .action-button .text {
            color: white; 
        }

        .action-button:hover {
            background-color: #2b9aff; /* ç•¥äº® */
        }

        .action-button:active {
            transform: scale(0.98);
        }

        .action-button .icon {
            font-size: 20px;
            line-height: 1;
            margin-bottom: 5px;
        }

        .action-button .text {
            font-size: 14px;
        }

        /* ----------------------------------- */
        /* æ¨¡å¼é€‰æ‹© (Segmented Control é£æ ¼) */
        /* ----------------------------------- */
        .mode-selector {
            padding-bottom: 15px;
            border-bottom: 1px solid var(--apple-border);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .mode-selector label:first-child {
            font-weight: 600;
            margin-right: 20px;
            color: var(--apple-text-color);
            white-space: nowrap;
        }

        .mode-buttons {
            display: inline-flex;
            /* æ¨¡ä»¿ Segmented Control çš„èƒŒæ™¯ */
            background-color: var(--input-box-bg); 
            border: 1px solid var(--apple-border);
            border-radius: 9px; /* æ›´åœ†æ¶¦ */
            overflow: hidden;
            flex-shrink: 1;
        }

        .mode-buttons input[type="radio"] {
            display: none;
        }

        .mode-buttons label {
            padding: 8px 15px;
            font-size: 14px; /* å­—ä½“ç•¥å° */
            cursor: pointer;
            background-color: transparent; /* é»˜è®¤é€æ˜ */
            color: var(--apple-secondary-text);
            transition: background-color 0.2s, color 0.2s, box-shadow 0.2s;
            /* åœ¨æš—é»‘æ¨¡å¼ä¸‹ç§»é™¤è¾¹æ¡†ï¼Œä¾èµ–èƒŒæ™¯é¢œè‰²å’Œé«˜äº® */
            border-right: none; 
            font-weight: 500;
            text-align: center;
            min-width: 80px;
        }
        
        /* é€‰ä¸­çŠ¶æ€ï¼šæ¨¡æ‹ŸSegmented Controlçš„è“è‰²èƒŒæ™¯å’Œç™½å­— */
        .mode-buttons input[type="radio"]:checked + label {
            background-color: var(--apple-primary);
            color: white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4); /* å¢åŠ æ·±åº¦æ„Ÿ */
        }

        /* ----------------------------------- */
        /* è¾“å‡ºåŒºåŸŸ */
        /* ----------------------------------- */
        .output-area h2 {
            font-size: 20px;
            font-weight: 500;
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--apple-border);
            padding-bottom: 8px;
        }

        .output-box {
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            background-color: var(--input-box-bg); /* å’Œè¾“å…¥æ¡†ä½¿ç”¨åŒçº§èƒŒæ™¯ */
            border: 1px solid var(--apple-border);
            border-radius: 8px;
            font-size: 16px;
            line-height: 1.6;
            color: var(--apple-text-color);
        }

        /* ----------------------------------- */
        /* å³ä¸‹è§’æç¤ºæŒ‰é’®ä¸æ¨¡æ€æ¡† */
        /* ----------------------------------- */
        .info-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: var(--apple-primary);
            color: white;
            font-size: 24px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            transition: background-color 0.2s, transform 0.2s;
            z-index: 100;
        }

        .info-button:hover {
            background-color: #2b9aff;
            transform: translateY(-2px);
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            z-index: 200;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6); /* æ›´æ·±çš„åŠé€æ˜èƒŒæ™¯ */
            backdrop-filter: blur(8px); /* æ›´å¼ºçš„ç£¨ç ‚ç»ç’ƒæ•ˆæœ */
        }

        .modal-content {
            margin: 10% auto;
            padding: 30px;
            width: 80%;
            max-width: 600px;
            position: relative;
            background-color: var(--apple-card-bg); /* ä½¿ç”¨å¡ç‰‡èƒŒæ™¯è‰² */
            animation-name: animatetop;
            animation-duration: 0.4s;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes animatetop {
            from {top: -300px; opacity: 0}
            to {top: 0; opacity: 1}
        }

        .close-button {
            color: var(--apple-secondary-text);
            float: right;
            font-size: 36px;
            font-weight: bold;
            transition: color 0.2s;
            line-height: 1;
        }

        .close-button:hover,
        .close-button:focus {
            color: var(--apple-text-color);
            text-decoration: none;
            cursor: pointer;
        }

        .modal-body h2 {
            color: var(--apple-primary);
        }

        .modal-body hr {
            border: none;
            border-top: 1px solid var(--apple-border);
            margin: 10px 0 20px 0;
        }

        .modal-body pre {
            background-color: var(--input-box-bg); /* ä½¿ç”¨æ·±è‰²èƒŒæ™¯ */
            padding: 10px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 14px;
            margin: 10px 0;
            color: white; /* ä»£ç æ–‡æœ¬ä½¿ç”¨çº¯ç™½ */
            border: 1px solid var(--apple-border);
        }

        .modal-body ul {
            padding-left: 20px;
            margin-top: 5px;
        }
    </style>
</head>
<body>

    <div class="container">
        <header class="card header-card">
            <h1>å¯¹ç§°å¤šé¡¹å¼åˆç­‰åˆ†è§£</h1>
            <p>Symmetric Polynomial Elementary Decomposition</p>
        </header>

        <div class="main-content card">
            
            <div class="mode-selector">
                <label>é€‰æ‹©åˆ†è§£æ¨¡å¼:</label>
                <div class="mode-buttons">
                    <input type="radio" id="mode1" name="polyMode" value="1" checked>
                    <label for="mode1">ç»å…¸æ¨¡å¼ (1)</label>
                    
                    <input type="radio" id="mode2" name="polyMode" value="2">
                    <label for="mode2">ä¹˜ç§¯æ¨¡å¼ (2)</label>
                    
                    <input type="radio" id="mode3" name="polyMode" value="3">
                    <label for="mode3">åŠ å’Œæ¨¡å¼ (3)</label>
                </div>
            </div>

            <div class="input-area">
                <textarea id="polyInput" placeholder="åœ¨æ­¤è¾“å…¥å¯¹ç§°å¤šé¡¹å¼..." rows="5"></textarea>
                <button id="submitBtn" class="action-button">
                    <span class="icon">â</span>
                    <span class="text">å›è½¦</span>
                </button>
            </div>
            
        </div>

        <div class="output-area card">
            <h2>åˆ†è§£ç»“æœ (æ”¯æŒ $\LaTeX$ æ¸²æŸ“)</h2>
            <div id="polyOutput" class="output-box" data-katex>
                ç­‰å¾…è¾“å…¥...
            </div>
        </div>
    </div>

    <button id="infoBtn" class="info-button">?</button>

    <div id="infoModal" class="modal">
        <div class="modal-content card">
            <span class="close-button">&times;</span>
            <div class="modal-body">
                <h2>ğŸ“˜ å¸®åŠ©ä¸æç¤º</h2>
                <hr>
                <p><strong>è¾“å…¥æ ¼å¼è¯´æ˜ï¼š</strong></p>
                <p>è¯·ç¡®ä¿æ‚¨çš„å¤šé¡¹å¼è¾“å…¥ç¬¦åˆç¨‹åºè¦æ±‚ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•å¤šé¡¹å¼å¯èƒ½æ˜¯ï¼š</p>
                <pre>a^2 + b^2 + c^2</pre>
                <p>ç¨‹åºå°†å°è¯•å°†å…¶åˆ†è§£ä¸ºåˆç­‰å¯¹ç§°å¤šé¡¹å¼ $\sigma_1, \sigma_2, \dots$ çš„ç»„åˆã€‚</p>
                <p><strong>åˆ†è§£æ¨¡å¼è§£é‡Šï¼š</strong></p>
                <ul>
                    <li>**ç»å…¸æ¨¡å¼ (1):** ç»“æœå°†ä½¿ç”¨æ ‡å‡†çš„åˆç­‰å¯¹ç§°å¤šé¡¹å¼è¡¨è¾¾ã€‚</li>
                    <li>**ä¹˜ç§¯æ¨¡å¼ (2):** ç»“æœå€¾å‘äºç”¨ä¹˜ç§¯å½¢å¼è¡¨ç¤ºã€‚</li>
                    <li>**åŠ å’Œæ¨¡å¼ (3):** ç»“æœå€¾å‘äºç”¨æ±‚å’Œå½¢å¼è¡¨ç¤ºã€‚</li>
                </ul>
                <p><strong>$\LaTeX$ æ”¯æŒï¼š</strong></p>
                <p>è¾“å‡ºåŒºåŸŸæ”¯æŒ $\LaTeX$ è¯­æ³•ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ `$` æˆ– `$$` ç¬¦å·æ¥åŒ…å«æ•°å­¦å…¬å¼ï¼Œä¾‹å¦‚ï¼š$\sigma_1 = \sum_{i} x_i$ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        // *** JavaScript é€»è¾‘éƒ¨åˆ† (ä¿æŒä¸å˜) ***

        /**
         * TODO: è¯·åœ¨æ­¤å¤„å®ç°æ‚¨çš„ DealPoly å‡½æ•°
         * @param {string} input - è¾“å…¥æ¡†çš„æ–‡æœ¬å†…å®¹
         * @param {number} mode - é€‰æ‹©çš„æ¨¡å¼ (1, 2, æˆ– 3)
         * @returns {string} - å¤„ç†åçš„ç»“æœæ–‡æœ¬ (åº”åŒ…å« LaTeX å­—ç¬¦ä¸²)
         */
        function DealPoly(input, mode) {
            // è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹å®ç°ï¼Œæ‚¨éœ€è¦æ›¿æ¢ä¸ºæ‚¨çš„å®é™…é€»è¾‘
            console.log(`å¤„ç†è¾“å…¥: "${input}", æ¨¡å¼: ${mode}`);
            
            if (!input.trim()) {
                return "è¯·è¾“å…¥ä¸€ä¸ªå¤šé¡¹å¼ã€‚";
            }
            
            // ç¤ºä¾‹è¾“å‡ºï¼ŒåŒ…å« LaTeX å…¬å¼
            const sampleOutput = {
                1: `æ ¹æ®ç»å…¸æ¨¡å¼ï¼Œå¤šé¡¹å¼ $${input.replace(/\s/g, "")}$$ çš„åˆç­‰åˆ†è§£ç»“æœä¸ºï¼š$$a^2 + b^2 + c^2 = \\sigma_1^2 - 2\\sigma_2$$å…¶ä¸­ $\\sigma_1 = a+b+c$ã€‚`,
                2: `ä¹˜ç§¯æ¨¡å¼ç»“æœï¼š$$\\frac{1}{2}\\sigma_1 (\\sigma_1^2 - 3\\sigma_2) + \\sigma_3$$`,
                3: `åŠ å’Œæ¨¡å¼ç»“æœï¼š$$(\\sigma_1 - a)(\\sigma_1 - b)(\\sigma_1 - c)$$`
            };
            
            return sampleOutput[mode] || "æ¨¡å¼é”™è¯¯æˆ–å¤„ç†å¤±è´¥ã€‚";
        }

        const polyInput = document.getElementById('polyInput');
        const submitBtn = document.getElementById('submitBtn');
        const polyOutput = document.getElementById('polyOutput');
        const modeRadios = document.querySelectorAll('input[name="polyMode"]');
        const infoBtn = document.getElementById('infoBtn');
        const infoModal = document.getElementById('infoModal');
        const closeButton = document.querySelector('.close-button');

        function processInput() {
            const input = polyInput.value;
            let mode = 1; // é»˜è®¤ç»å…¸æ¨¡å¼
            modeRadios.forEach(radio => {
                if (radio.checked) {
                    mode = parseInt(radio.value);
                }
            });
            
            // è°ƒç”¨ DealPoly å‡½æ•°
            const result = DealPoly(input, mode);
            
            // æ›´æ–°è¾“å‡ºæ¡†å†…å®¹
            polyOutput.innerHTML = result;
            
            // é‡æ–°æ¸²æŸ“ LaTeX
            if (typeof renderMathInElement === 'function') {
                renderMathInElement(polyOutput, {
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "$", right: "$", display: false}
                    ],
                    throwOnError : false
                });
            } else {
                console.error("KaTeX auto-render function is not available.");
            }
        }

        // æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        submitBtn.addEventListener('click', processInput);
        
        // æ¨¡æ€æ¡†é€»è¾‘
        infoBtn.addEventListener('click', () => {
            infoModal.style.display = 'block';
        });

        closeButton.addEventListener('click', () => {
            infoModal.style.display = 'none';
        });

        window.addEventListener('click', (event) => {
            if (event.target == infoModal) {
                infoModal.style.display = 'none';
            }
        });
        
        // åˆå§‹æ¸²æŸ“ä¸€æ¬¡
        if (typeof renderMathInElement === 'function') {
            renderMathInElement(polyOutput, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false}
                ],
                throwOnError : false
            });
        }
        
    </script>
</body>
</html>